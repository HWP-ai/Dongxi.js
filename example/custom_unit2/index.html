<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<script src="../../src/Dongxi.js"></script>
		<style>
			fruit{ display: block; }
		</style>
	</head>
	<body>
		<script>
		
			/**
			 * a list of fruit
			 */
			
			var fruit_list = [
				["apple", "red"],
				["blueberry", "blue"],
				["orange", "orange"],
				["watermelon", "green"],
				["crataegus", "#a00"],
				["pineapple", "yellow"],
				["grape", "#a0a"],
				["carambola", "#992"],
				["coconut","#933"],
				["cherry","#f11"]
			]
			
		
			/**
			 * same like in ../custome_unit
			 */
			var builder = Dongxi.builder('mybuilder');

			/**
			 * same like in ../custome_unit
			 */
			builder.units['fruit'] = function(info){
				var node = this.prefab('fruit', info);
				var text = builder.make('text', {
					text: 'Hello, ' + info.type + '!'
				});
				node.setAttribute(info.type, "");
				node.appendChild(text);
				if(info.color){
					node.style.color = info.color;
				}
				return node;
			}

			/**
			 * many fruits
			 */
			Dongxi.manage.run = function(){				
				var _builder = Dongxi.builder('mybuilder');
				var stage = _builder.make('stage', {});
				for(var i=0; i<fruit_list.length; ++i){
					var info = fruit_list[i];
					var fruit = _builder.make('fruit', {
						type: info[0],
						color: info[1]
					});
					stage.appendChild(fruit);
				}
				window.document.body.prepend(stage);
			}
			
			/**
			 * call Dongxi.manage.main
			 */
			Dongxi.manage.main();
		</script>
	</body>
</html>